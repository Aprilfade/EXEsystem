
-- ----------------------------
-- æ•°æ®åº“: exam_system
-- ----------------------------
CREATE DATABASE IF NOT EXISTS exam_system DEFAULT CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
USE exam_system;

-- ----------------------------
-- 1. ç”¨æˆ·è¡¨
-- ----------------------------
CREATE TABLE `sys_user` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `username` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ç”¨æˆ·å, å”¯ä¸€',
  `password` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'å¯†ç , BCryptåŠ å¯†å­˜å‚¨',
  `nick_name` varchar(64) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'æ˜µç§°',
  `is_enabled` tinyint(1) DEFAULT '1' COMMENT 'è´¦æˆ·æ˜¯å¦å¯ç”¨ (1:æ˜¯, 0:å¦)',
  `is_deleted` tinyint(1) DEFAULT '0' COMMENT 'é€»è¾‘åˆ é™¤æ ‡è®° (0:å¦, 1:æ˜¯)',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_username` (`username`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç”¨æˆ·è¡¨';
-- ----------------------------
-- 2. è§’è‰²è¡¨
-- ----------------------------
CREATE TABLE `sys_role` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `name` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'è§’è‰²å',
  `code` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'è§’è‰²ç¼–ç , å¦‚ "ADMIN", "TEACHER"',
  `description` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'æè¿°',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_code` (`code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è§’è‰²è¡¨';

-- ----------------------------
-- 3. ç”¨æˆ·è§’è‰²å…³è”è¡¨
-- ----------------------------
CREATE TABLE `sys_user_role` (
  `user_id` bigint NOT NULL COMMENT 'ç”¨æˆ·ID',
  `role_id` bigint NOT NULL COMMENT 'è§’è‰²ID',
  PRIMARY KEY (`user_id`,`role_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç”¨æˆ·è§’è‰²å…³è”è¡¨';


-- ----------------------------
-- 4. ç§‘ç›®è¡¨
-- ----------------------------
CREATE TABLE `biz_subject` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ç§‘ç›®åç§°',
  `description` varchar(255) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'ç®€ä»‹',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç§‘ç›®è¡¨';

-- ----------------------------
-- 5. çŸ¥è¯†ç‚¹è¡¨
-- ----------------------------
CREATE TABLE `biz_knowledge_point` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `subject_id` bigint NOT NULL COMMENT 'å¤–é”®å…³è”biz_subject',
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'çŸ¥è¯†ç‚¹åç§°',
  `description` text COLLATE utf8mb4_unicode_ci COMMENT 'æè¿°',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='çŸ¥è¯†ç‚¹è¡¨';

-- ----------------------------
-- 6. å­¦ç”Ÿè¡¨
-- ----------------------------
CREATE TABLE `biz_student` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `student_no` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'å­¦å·, å”¯ä¸€',
  `name` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'å§“å',
  `contact` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'è”ç³»æ–¹å¼',
  `subject_id` bigint NOT NULL COMMENT 'æ‰€å±ç§‘ç›®ID',
  `grade` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'å¹´çº§ (ä¾‹å¦‚: 2009çº§)',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_student_no` (`student_no`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='å­¦ç”Ÿè¡¨';
-- ----------------------------
-- 7. è¯•é¢˜è¡¨
-- ----------------------------
CREATE TABLE `biz_question` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `subject_id` bigint NOT NULL COMMENT 'å…³è”ç§‘ç›®ID',
  `question_type` int NOT NULL COMMENT 'é¢˜å‹: 1-å•é€‰, 2-å¤šé€‰, 3-å¡«ç©º, 4-åˆ¤æ–­, 5-ä¸»è§‚é¢˜',
  `content` text COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'é¢˜å¹²',
  `image_url` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'é¢˜ç›®å›¾ç‰‡åœ°å€,å¤šä¸ªé€—å·éš”å¼€',
  `options` json DEFAULT NULL COMMENT 'é€‰é¡¹, ä»…å¯¹é€‰æ‹©é¢˜æœ‰æ•ˆ, æ ¼å¼: [{"key":"A","value":"é€‰é¡¹ä¸€"},{"key":"B","value":"é€‰é¡¹äºŒ"}]',
  `answer` text COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'å‚è€ƒç­”æ¡ˆ, å¤šé€‰é¢˜ç­”æ¡ˆç”¨é€—å·éš”å¼€, å¡«ç©ºé¢˜ç­”æ¡ˆç”¨###éš”å¼€',
  `description` text COLLATE utf8mb4_unicode_ci COMMENT 'é¢˜ç›®è§£æ',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è¯•é¢˜è¡¨';

-- ----------------------------
-- 8. è¯•é¢˜çŸ¥è¯†ç‚¹å…³è”è¡¨
-- ----------------------------
CREATE TABLE `biz_question_knowledge_point` (
  `question_id` bigint NOT NULL COMMENT 'è¯•é¢˜ID',
  `knowledge_point_id` bigint NOT NULL COMMENT 'çŸ¥è¯†ç‚¹ID',
  PRIMARY KEY (`question_id`,`knowledge_point_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è¯•é¢˜çŸ¥è¯†ç‚¹å…³è”è¡¨';

-- ----------------------------
-- ----------------------------
-- 9. è¯•å·è¡¨
-- ----------------------------
CREATE TABLE `biz_paper` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'è¯•å·åç§°',
  `code` varchar(100) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'è¯•å·ç¼–ç ',
  `subject_id` bigint NOT NULL COMMENT 'æ‰€å±ç§‘ç›®ID',
  `description` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL,
  `total_score` int DEFAULT '100' COMMENT 'æ€»åˆ†',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP COMMENT 'æ›´æ–°æ—¶é—´',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è¯•å·è¡¨';

-- ----------------------------
-- 10. è¯•å·é¢˜ç›®å…³è”è¡¨
-- ----------------------------
CREATE TABLE `biz_paper_question` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `paper_id` bigint NOT NULL,
  `question_id` bigint NOT NULL,
  `score` int NOT NULL COMMENT 'åˆ†å€¼',
  `sort_order` int DEFAULT '0' COMMENT 'æ’åº',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è¯•å·é¢˜ç›®å…³è”è¡¨';

-- ----------------------------
-- 11. é”™é¢˜è®°å½•è¡¨
-- ----------------------------
CREATE TABLE `biz_wrong_record` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `student_id` bigint NOT NULL COMMENT 'å­¦ç”ŸID',
  `question_id` bigint NOT NULL COMMENT 'é¢˜ç›®ID',
  `paper_id` bigint DEFAULT NULL COMMENT 'å¯é€‰, å…³è”è¯•å·ID',
  `wrong_answer` text COLLATE utf8mb4_unicode_ci COMMENT 'å­¦ç”Ÿçš„é”™è¯¯ç­”æ¡ˆ',
  `wrong_reason` text COLLATE utf8mb4_unicode_ci COMMENT 'é”™è¯¯åŸå› åˆ†æ',
  `is_mastered` tinyint(1) DEFAULT '0' COMMENT 'æ˜¯å¦å·²æŒæ¡ (1:æ˜¯, 0:å¦)',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  INDEX `idx_student_id` (`student_id`),
  INDEX `idx_question_id` (`question_id`),
  INDEX `idx_paper_id` (`paper_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='é”™é¢˜è®°å½•è¡¨';

-- ----------------------------
-- 12. è¯•å·å›¾ç‰‡å…³è”è¡¨
-- ----------------------------
CREATE TABLE `biz_paper_image` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `paper_id` bigint NOT NULL COMMENT 'è¯•å·ID',
  `image_url` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'å›¾ç‰‡è®¿é—®åœ°å€',
  `sort_order` int DEFAULT '0' COMMENT 'å›¾ç‰‡æ’åº',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è¯•å·å›¾ç‰‡å…³è”è¡¨';

-- åŒæ—¶ï¼Œä¸ºè¯•å·è¡¨å¢åŠ ä¸€ä¸ªå­—æ®µï¼Œç”¨äºåŒºåˆ†è¯•å·ç±»å‹
ALTER TABLE `biz_paper` ADD COLUMN `paper_type` INT DEFAULT 1 COMMENT 'è¯•å·ç±»å‹: 1-æ‰‹åŠ¨é€‰é¢˜, 2-å›¾ç‰‡æ‹¼æ¥';
-- ----------------------------
-- 13. ã€æ–°å¢ã€‘è¯•å·é¢˜ç›®åˆ†ç»„è¡¨
-- ----------------------------
CREATE TABLE `biz_paper_group` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `paper_id` bigint NOT NULL COMMENT 'æ‰€å±è¯•å·ID',
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'åˆ†ç»„æ ‡é¢˜ (ä¾‹å¦‚: ä¸€ã€é€‰æ‹©é¢˜)',
  `sort_order` int DEFAULT '0' COMMENT 'åˆ†ç»„æ’åº',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è¯•å·é¢˜ç›®åˆ†ç»„è¡¨';

-- ----------------------------
-- ã€ä¿®æ”¹ã€‘è¯•å·é¢˜ç›®å…³è”è¡¨
-- ----------------------------
-- ä¸º biz_paper_question è¡¨æ·»åŠ  group_id å­—æ®µ
ALTER TABLE `biz_paper_question` ADD COLUMN `group_id` bigint DEFAULT NULL COMMENT 'æ‰€å±åˆ†ç»„ID';


CREATE TABLE `sys_notification` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `title` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'é€šçŸ¥æ ‡é¢˜',
  `content` text COLLATE utf8mb4_unicode_ci COMMENT 'é€šçŸ¥å†…å®¹',
  `is_published` tinyint(1) DEFAULT '0' COMMENT 'æ˜¯å¦å‘å¸ƒ (1:æ˜¯, 0:å¦)',
  `publish_time` datetime DEFAULT NULL COMMENT 'å‘å¸ƒæ—¶é—´',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç³»ç»Ÿé€šçŸ¥è¡¨';



-- ----------------------------
-- 1. ã€æ–°å¢ã€‘è¯•å·é¢˜ç›®åˆ†ç»„è¡¨
-- ----------------------------
CREATE TABLE `biz_paper_group` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `paper_id` bigint NOT NULL COMMENT 'æ‰€å±è¯•å·ID',
  `name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'åˆ†ç»„æ ‡é¢˜ (ä¾‹å¦‚: ä¸€ã€é€‰æ‹©é¢˜)',
  `sort_order` int DEFAULT '0' COMMENT 'åˆ†ç»„æ’åº',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è¯•å·é¢˜ç›®åˆ†ç»„è¡¨';


-- ----------------------------
-- 2. ã€ä¿®æ”¹ã€‘è¯•å·é¢˜ç›®å…³è”è¡¨
-- ----------------------------
-- ä¸º biz_paper_question è¡¨æ·»åŠ  group_id å­—æ®µï¼Œç”¨äºå…³è” biz_paper_group
ALTER TABLE `biz_paper_question` ADD COLUMN `group_id` bigint DEFAULT NULL COMMENT 'æ‰€å±åˆ†ç»„ID';


-- ----------------------------
-- 14. æƒé™è¡¨ (æ–°å¢)
-- ----------------------------
CREATE TABLE `sys_permission` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'æƒé™åç§° (e.g., ç”¨æˆ·ç®¡ç†)',
  `code` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'æƒé™æ ‡è¯† (e.g., sys:user:list)',
  `type` tinyint NOT NULL COMMENT 'ç±»å‹ (1:èœå•, 2:æŒ‰é’®/æ“ä½œ)',
  `parent_id` bigint DEFAULT '0' COMMENT 'çˆ¶æƒé™ID',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_code` (`code`)
) ENGINE=InnoDB AUTO_INCREMENT=100 DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='æƒé™è¡¨';

-- ----------------------------
-- 15. è§’è‰²æƒé™å…³è”è¡¨ (æ–°å¢)
-- ----------------------------
CREATE TABLE `sys_role_permission` (
  `role_id` bigint NOT NULL COMMENT 'è§’è‰²ID',
  `permission_id` bigint NOT NULL COMMENT 'æƒé™ID',
  PRIMARY KEY (`role_id`,`permission_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è§’è‰²æƒé™å…³è”è¡¨';

-- ----------------------------
-- åˆå§‹åŒ–æƒé™æ•°æ®
-- ----------------------------
INSERT INTO `sys_permission` (id, name, code, type, parent_id) VALUES
(1, 'ç³»ç»Ÿç®¡ç†', 'sys', 1, 0),
(2, 'æˆå‘˜ç®¡ç†', 'sys:user', 1, 1),
(10, 'æŸ¥çœ‹ç”¨æˆ·', 'sys:user:list', 2, 2),
(11, 'æ–°å¢ç”¨æˆ·', 'sys:user:create', 2, 2),
(12, 'ç¼–è¾‘ç”¨æˆ·', 'sys:user:update', 2, 2),
(13, 'åˆ é™¤ç”¨æˆ·', 'sys:user:delete', 2, 2),
(20, 'ç§‘ç›®ç®¡ç†', 'sys:subject:list', 1, 0),
(21, 'çŸ¥è¯†ç‚¹ç®¡ç†', 'sys:kp:list', 1, 0),
(22, 'é¢˜åº“ç®¡ç†', 'sys:question:list', 1, 0),
(23, 'è¯•å·ç®¡ç†', 'sys:paper:list', 1, 0),
(24, 'å­¦ç”Ÿç®¡ç†', 'sys:student:list', 1, 0),
(25, 'é”™é¢˜ç®¡ç†', 'sys:wrong:list', 1, 0),
(26, 'æ•™å­¦ç»Ÿè®¡', 'sys:stats:list', 1, 0),
(27, 'é€šçŸ¥ç®¡ç†', 'sys:notify:list', 1, 0);


-- ----------------------------
-- åˆå§‹åŒ–è§’è‰²æƒé™å…³è”æ•°æ® (ä¸º ADMIN è§’è‰²åˆ†é…æ‰€æœ‰æƒé™)
-- ----------------------------
INSERT INTO `sys_role_permission` (role_id, permission_id) VALUES
(2, 1),
(2, 2),
(2, 10),
(2, 11),
(2, 12),
(2, 13),
(2, 20),
(2, 21),
(2, 22),
(2, 23),
(2, 24),
(2, 25),
(2, 26),
(2, 27);

-- ----------------------------
-- ä¸ºè§’è‰²ç®¡ç†æ–°å¢æƒé™æ ‡è¯†
-- ----------------------------
INSERT INTO `sys_permission` (id, name, code, type, parent_id) VALUES (14, 'è§’è‰²æƒé™', 'sys:role:perm', 2, 2);

-- ----------------------------
-- ä¸º ADMIN è§’è‰²åˆ†é…æ–°çš„æƒé™
-- ----------------------------
INSERT INTO `sys_role_permission` (role_id, permission_id) VALUES (2, 14);

CREATE TABLE `sys_login_log` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `username` varchar(64) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ç™»å½•ç”¨æˆ·å',
  `ip_address` varchar(128) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'ç™»å½•IPåœ°å€',
  `log_type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'æ—¥å¿—ç±»å‹ (LOGIN_SUCCESS, LOGIN_FAILURE, LOGOUT)',
  `user_agent` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'æµè§ˆå™¨ç”¨æˆ·ä»£ç†',
  `log_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'æ—¥å¿—è®°å½•æ—¶é—´',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='ç”¨æˆ·ç™»å½•æ—¥å¿—è¡¨';


-- ----------------------------
-- 16. ã€æ–°å¢ã€‘å­¦ä¹ æ´»åŠ¨æ—¥å¿—è¡¨
-- ----------------------------
CREATE TABLE `biz_learning_activity` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `student_id` bigint NOT NULL COMMENT 'å­¦ç”ŸID',
  `activity_type` varchar(50) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'æ´»åŠ¨ç±»å‹ (ä¾‹å¦‚: PRACTICE, EXAM)',
  `description` text COLLATE utf8mb4_unicode_ci COMMENT 'æ´»åŠ¨æè¿°',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  INDEX `idx_student_id` (`student_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='å­¦ä¹ æ´»åŠ¨æ—¥å¿—è¡¨';

-- ----------------------------
-- 17. ã€æ–°å¢ã€‘è€ƒè¯•æˆç»©è®°å½•è¡¨
-- ----------------------------
CREATE TABLE `biz_exam_result` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `student_id` bigint NOT NULL COMMENT 'å­¦ç”ŸID',
  `paper_id` bigint NOT NULL COMMENT 'è¯•å·ID',
  `paper_name` varchar(255) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'è¯•å·åç§°å¿«ç…§',
  `score` int NOT NULL DEFAULT '0' COMMENT 'å¾—åˆ†',
  `total_score` int NOT NULL DEFAULT '0' COMMENT 'è¯•å·æ€»åˆ†',
  `user_answers` json DEFAULT NULL COMMENT 'ç”¨æˆ·ç­”é¢˜è¯¦æƒ…(JSON)',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'è€ƒè¯•æ—¶é—´',
  PRIMARY KEY (`id`),
  INDEX `idx_student_paper` (`student_id`, `paper_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è€ƒè¯•æˆç»©è®°å½•è¡¨';
ALTER TABLE `biz_exam_result` ADD COLUMN `violation_count` INT DEFAULT 0 COMMENT 'è¿è§„/åˆ‡å±æ¬¡æ•°';

ALTER TABLE `biz_student` ADD COLUMN `points` INT DEFAULT 0 COMMENT 'å­¦ä¹ ç§¯åˆ†';

-- ----------------------------
-- 18. ã€æ–°å¢ã€‘é¢˜ç›®æ”¶è—è¡¨
-- ----------------------------
CREATE TABLE `biz_favorite` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `student_id` bigint NOT NULL COMMENT 'å­¦ç”ŸID',
  `question_id` bigint NOT NULL COMMENT 'é¢˜ç›®ID',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'æ”¶è—æ—¶é—´',
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_student_question` (`student_id`, `question_id`) COMMENT 'é˜²æ­¢é‡å¤æ”¶è—'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='é¢˜ç›®æ”¶è—è¡¨';

-- ----------------------------
-- 19. ç§¯åˆ†å•†åŸ-å•†å“è¡¨
-- ----------------------------
CREATE TABLE `biz_goods` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL COMMENT 'å•†å“åç§°',
  `description` varchar(255) DEFAULT NULL COMMENT 'æè¿°',
  `price` int NOT NULL DEFAULT '0' COMMENT 'å…‘æ¢æ‰€éœ€ç§¯åˆ†',
  `image_url` varchar(500) DEFAULT NULL COMMENT 'å•†å“å›¾ç‰‡/å›¾æ ‡URL',
  `type` varchar(50) DEFAULT 'AVATAR_FRAME' COMMENT 'ç±»å‹: AVATAR_FRAME(å¤´åƒæ¡†), BACKGROUND(èƒŒæ™¯)',
  `resource_value` varchar(500) DEFAULT NULL COMMENT 'èµ„æºå€¼(å¦‚cssç±»åæˆ–å›¾ç‰‡åœ°å€)',
  `stock` int DEFAULT -1 COMMENT 'åº“å­˜ï¼Œ-1è¡¨ç¤ºæ— é™',
  `is_enabled` tinyint(1) DEFAULT 1 COMMENT 'æ˜¯å¦ä¸Šæ¶',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç§¯åˆ†å•†å“è¡¨';

-- ----------------------------
-- 20. ç§¯åˆ†å•†åŸ-ç”¨æˆ·å…‘æ¢è®°å½•è¡¨
-- ----------------------------
CREATE TABLE `biz_user_goods` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `student_id` bigint NOT NULL COMMENT 'å­¦ç”ŸID',
  `goods_id` bigint NOT NULL COMMENT 'å•†å“ID',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'å…‘æ¢æ—¶é—´',
  PRIMARY KEY (`id`),
  INDEX `idx_student` (`student_id`),
  UNIQUE KEY `uk_student_goods` (`student_id`, `goods_id`) -- é™åˆ¶æ¯ä¸ªå•†å“æ¯äººåªèƒ½æ¢ä¸€æ¬¡(é’ˆå¯¹è™šæ‹Ÿç‰©å“)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç”¨æˆ·å•†å“æŒæœ‰è¡¨';

-- åˆå§‹åŒ–å‡ ä¸ªæµ‹è¯•å•†å“æ•°æ®
INSERT INTO `biz_goods` (`name`, `description`, `price`, `type`, `resource_value`) VALUES
('é’é“œå­¦è€…æ¡†', 'è±¡å¾å‹¤å¥‹çš„é’é“œå¤´åƒæ¡†', 50, 'AVATAR_FRAME', 'border: 3px solid #cd7f32; border-radius: 50%;'),
('ç™½é“¶å­¦éœ¸æ¡†', 'åªæœ‰å‰10%çš„å­¦ç”Ÿæ‰èƒ½æ‹¥æœ‰', 200, 'AVATAR_FRAME', 'border: 3px solid #c0c0c0; box-shadow: 0 0 10px #c0c0c0; border-radius: 50%;'),
('é»„é‡‘æˆ˜ç¥æ¡†', 'ä¼ è¯´ä¸­çš„å­¦ç¥', 1000, 'AVATAR_FRAME', 'border: 3px solid #ffd700; box-shadow: 0 0 15px #ffd700; border-radius: 50%;'),
('æ˜Ÿç©ºèƒŒæ™¯', 'è®©ä½ çš„ä¸»é¡µå……æ»¡ç§‘æŠ€æ„Ÿ', 500, 'BACKGROUND', '/bg/star.jpg');

-- ç»™å­¦ç”Ÿè¡¨å¢åŠ ä¸¤ä¸ªå­—æ®µï¼Œå­˜å‚¨å½“å‰ä½¿ç”¨çš„è£…æ‰®
ALTER TABLE `biz_student`
ADD COLUMN `avatar_frame_style` varchar(500) DEFAULT NULL COMMENT 'å½“å‰å¤´åƒæ¡†CSS',
ADD COLUMN `background_url` varchar(500) DEFAULT NULL COMMENT 'å½“å‰èƒŒæ™¯å›¾URL';


-- ----------------------------
-- 1. è¯¾ç¨‹è¡¨
-- ----------------------------
CREATE TABLE `biz_course` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `name` varchar(100) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'è¯¾ç¨‹åç§°',
  `description` text COLLATE utf8mb4_unicode_ci COMMENT 'è¯¾ç¨‹ç®€ä»‹',
  `cover_url` varchar(500) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'è¯¾ç¨‹å°é¢å›¾',
  `subject_id` bigint DEFAULT NULL COMMENT 'å…³è”ç§‘ç›®ID',
  `grade` varchar(50) COLLATE utf8mb4_unicode_ci DEFAULT NULL COMMENT 'é€‚ç”¨å¹´çº§',
  `teacher_id` bigint DEFAULT NULL COMMENT 'åˆ›å»ºæ•™å¸ˆID',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP COMMENT 'åˆ›å»ºæ—¶é—´',
  `update_time` datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è¯¾ç¨‹è¡¨';

-- ----------------------------
-- 2. è¯¾ç¨‹èµ„æºè¡¨ (ç« èŠ‚/è¯¾æ—¶)
-- ----------------------------
CREATE TABLE `biz_course_resource` (
  `id` bigint NOT NULL AUTO_INCREMENT COMMENT 'ä¸»é”®ID',
  `course_id` bigint NOT NULL COMMENT 'æ‰€å±è¯¾ç¨‹ID',
  `name` varchar(200) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'èµ„æº/ç« èŠ‚åç§°',
  `resource_type` varchar(20) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'ç±»å‹: VIDEO, PDF, PPT, LINK',
  `resource_url` varchar(500) COLLATE utf8mb4_unicode_ci NOT NULL COMMENT 'èµ„æºåœ°å€',
  `knowledge_point_id` bigint DEFAULT NULL COMMENT 'å…³è”çŸ¥è¯†ç‚¹ID(å¯é€‰)',
  `sort_order` int DEFAULT '0' COMMENT 'æ’åº',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  INDEX `idx_course_id` (`course_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci COMMENT='è¯¾ç¨‹èµ„æºè¡¨';


-- 1. åœ¨æƒé™è¡¨æ’å…¥â€œè¯¾ç¨‹ç®¡ç†â€èœå•æƒé™
-- id=30 (ç¡®ä¿ä¸é‡å¤å³å¯), type=1 (è¡¨ç¤ºèœå•), parent_id=0 (è¡¨ç¤ºä¸€çº§èœå•)
INSERT INTO `sys_permission` (`id`, `name`, `code`, `type`, `parent_id`)
VALUES (30, 'è¯¾ç¨‹ç®¡ç†', 'sys:course:edit', 1, 0);

-- 2. ä¸ºç®¡ç†å‘˜è§’è‰²ï¼ˆå‡è®¾ ID ä¸º 2ï¼‰åˆ†é…è¯¥æƒé™
-- å¦‚æœæ‚¨æœ‰å…¶ä»–è§’è‰²éœ€è¦æ­¤æƒé™ï¼Œè¯·é‡å¤æ­¤è¯­å¥å¹¶ä¿®æ”¹ role_id
INSERT INTO `sys_role_permission` (`role_id`, `permission_id`)
VALUES (2, 30);

-- å¦‚æœè¿˜æ²¡åŠ ç´¢å¼•ï¼Œå»ºè®®æ‰§è¡Œï¼š
CREATE INDEX idx_question_subject_id ON biz_question(subject_id);

-- æ·»åŠ è”åˆå”¯ä¸€ç´¢å¼•
ALTER TABLE `biz_subject` ADD UNIQUE INDEX `uk_grade_name` (`grade`, `name`);


-- ----------------------------
-- 21. è¯¾ç¨‹è¯„è®º/è®¨è®ºè¡¨
-- ----------------------------
CREATE TABLE `biz_course_comment` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `course_id` bigint NOT NULL COMMENT 'è¯¾ç¨‹ID',
  `student_id` bigint NOT NULL COMMENT 'å­¦ç”ŸID',
  `content` varchar(1000) NOT NULL COMMENT 'è¯„è®ºå†…å®¹',
  `reply_id` bigint DEFAULT NULL COMMENT 'å›å¤çš„çˆ¶è¯„è®ºID(å¯é€‰)',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  INDEX `idx_course_id` (`course_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='è¯¾ç¨‹è®¨è®ºè¡¨';


-- ----------------------------
-- 22. ã€æ–°å¢ã€‘ç­¾åˆ°è®°å½•è¡¨
-- ----------------------------
CREATE TABLE `biz_sign_in` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `student_id` bigint NOT NULL COMMENT 'å­¦ç”ŸID',
  `sign_date` date NOT NULL COMMENT 'ç­¾åˆ°æ—¥æœŸ',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_student_date` (`student_id`, `sign_date`) COMMENT 'æ¯æ—¥åªèƒ½ç­¾åˆ°ä¸€æ¬¡',
  INDEX `idx_student_id` (`student_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='å­¦ç”Ÿç­¾åˆ°è¡¨';


CREATE TABLE `sys_oper_log` (
  `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT 'æ—¥å¿—ä¸»é”®',
  `title` varchar(50) DEFAULT '' COMMENT 'æ¨¡å—æ ‡é¢˜',
  `business_type` int(2) DEFAULT 0 COMMENT 'ä¸šåŠ¡ç±»å‹ï¼ˆ0å…¶å®ƒ 1æ–°å¢ 2ä¿®æ”¹ 3åˆ é™¤ï¼‰',
  `method` varchar(100) DEFAULT '' COMMENT 'æ–¹æ³•åç§°',
  `request_method` varchar(10) DEFAULT '' COMMENT 'è¯·æ±‚æ–¹å¼',
  `operator_type` int(1) DEFAULT 0 COMMENT 'æ“ä½œç±»åˆ«ï¼ˆ0å…¶å®ƒ 1åå°ç”¨æˆ· 2æ‰‹æœºç«¯ç”¨æˆ·ï¼‰',
  `oper_name` varchar(50) DEFAULT '' COMMENT 'æ“ä½œäººå‘˜',
  `oper_url` varchar(255) DEFAULT '' COMMENT 'è¯·æ±‚URL',
  `oper_ip` varchar(128) DEFAULT '' COMMENT 'ä¸»æœºåœ°å€',
  `oper_param` varchar(2000) DEFAULT '' COMMENT 'è¯·æ±‚å‚æ•°',
  `json_result` varchar(2000) DEFAULT '' COMMENT 'è¿”å›å‚æ•°',
  `status` int(1) DEFAULT 0 COMMENT 'æ“ä½œçŠ¶æ€ï¼ˆ0æ­£å¸¸ 1å¼‚å¸¸ï¼‰',
  `error_msg` varchar(2000) DEFAULT '' COMMENT 'é”™è¯¯æ¶ˆæ¯',
  `oper_time` datetime DEFAULT NULL COMMENT 'æ“ä½œæ—¶é—´',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=100 DEFAULT CHARSET=utf8mb4 COMMENT='æ“ä½œæ—¥å¿—è®°å½•';



ALTER TABLE `biz_exam_result`
ADD COLUMN `result_details` LONGTEXT COMMENT 'è€ƒè¯•ç»“æœè¯¦æƒ…(å­˜å‚¨AIè¯„åˆ†å’Œå»ºè®® JSON)';


-- ä¸ºé”™é¢˜è¡¨å¢åŠ å¤ä¹ è®¡æ•°å­—æ®µï¼Œé»˜è®¤ä¸º 0
ALTER TABLE biz_wrong_record ADD COLUMN review_count INT DEFAULT 0 COMMENT 'å·²æˆåŠŸå¤ä¹ æ¬¡æ•°';

-- ä¸ºé”™é¢˜è¡¨å¢åŠ ä¸‹æ¬¡å¤ä¹ æ—¶é—´å­—æ®µï¼Œé»˜è®¤ä¸ºåˆ›å»ºåçš„ç¬¬2å¤©
ALTER TABLE biz_wrong_record ADD COLUMN next_review_time DATETIME DEFAULT NULL COMMENT 'è®¡åˆ’ä¸‹æ¬¡å¤ä¹ æ—¶é—´';

-- åˆå§‹åŒ–æ—§æ•°æ®ï¼šå°†æ‰€æœ‰æ—§é”™é¢˜çš„ä¸‹æ¬¡å¤ä¹ æ—¶é—´è®¾ä¸ºå½“å‰ï¼Œä»¥ä¾¿ç«‹å³å¤ä¹ 
UPDATE biz_wrong_record SET next_review_time = NOW() WHERE next_review_time IS NULL;

ALTER TABLE `sys_notification`
ADD COLUMN `target_type` VARCHAR(20) DEFAULT 'ALL' COMMENT 'å‘å¸ƒå¯¹è±¡: ALL-å…¨ä½“, STUDENT-å­¦ç”Ÿ, TEACHER-æ•™å¸ˆ/ç®¡ç†å‘˜';


-- 1. æ’å…¥æƒé™æ•°æ® (id è‡ªåŠ¨é€’å¢æˆ–æŒ‡å®šä¸€ä¸ªæœªä½¿ç”¨çš„ID)
INSERT INTO `sys_permission` (`name`, `code`, `type`, `parent_id`)
VALUES ('æ“ä½œæ—¥å¿—', 'sys:log:oper', 1, 1);
-- å‡è®¾ parent_id=1 æ˜¯ "ç³»ç»Ÿç®¡ç†" çš„ID

-- 2. ä¸ºç®¡ç†å‘˜è§’è‰² (å‡è®¾ ID=2) åˆ†é…æƒé™
-- å…ˆæŸ¥è¯¢åˆšæ‰æ’å…¥çš„æƒé™ ID
-- SELECT id FROM sys_permission WHERE code = 'sys:log:oper';
-- å‡è®¾æŸ¥å‡ºæ¥çš„ ID æ˜¯ 31
INSERT INTO `sys_role_permission` (`role_id`, `permission_id`) VALUES (2, 31);


-- ----------------------------
-- 1. ç­çº§è¡¨
-- ----------------------------
CREATE TABLE `biz_class` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL COMMENT 'ç­çº§åç§°',
  `grade` varchar(50) DEFAULT NULL COMMENT 'å¹´çº§',
  `teacher_id` bigint NOT NULL COMMENT 'ç­ä¸»ä»»/åˆ›å»ºæ•™å¸ˆID (å…³è” sys_user)',
  `code` varchar(20) NOT NULL COMMENT '6ä½é‚€è¯·ç ï¼Œç”¨äºå­¦ç”ŸåŠ å…¥',
  `description` varchar(500) DEFAULT NULL,
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_code` (`code`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç­çº§è¡¨';

-- ----------------------------
-- 2. ç­çº§å­¦ç”Ÿå…³è”è¡¨
-- ----------------------------
CREATE TABLE `biz_class_student` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `class_id` bigint NOT NULL,
  `student_id` bigint NOT NULL,
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_class_student` (`class_id`,`student_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç­çº§æˆå‘˜è¡¨';

-- ----------------------------
-- 3. ä½œä¸šè¡¨ (å…³è”è¯•å·)
-- ----------------------------
CREATE TABLE `biz_homework` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `class_id` bigint NOT NULL COMMENT 'æ‰€å±ç­çº§',
  `title` varchar(200) NOT NULL COMMENT 'ä½œä¸šæ ‡é¢˜',
  `paper_id` bigint NOT NULL COMMENT 'å…³è”çš„è¯•å·ID',
  `deadline` datetime DEFAULT NULL COMMENT 'æˆªæ­¢æ—¶é—´',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  INDEX `idx_class` (`class_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç­çº§ä½œä¸šè¡¨';

-- ----------------------------
-- 4. ä½œä¸šæäº¤è®°å½•è¡¨
-- ----------------------------
CREATE TABLE `biz_homework_record` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `homework_id` bigint NOT NULL,
  `student_id` bigint NOT NULL,
  `status` int DEFAULT 0 COMMENT '0:æœªå®Œæˆ, 1:å·²å®Œæˆ',
  `score` int DEFAULT NULL COMMENT 'å¾—åˆ†',
  `exam_result_id` bigint DEFAULT NULL COMMENT 'å…³è”çš„è€ƒè¯•ç»“æœID',
  `submit_time` datetime DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_hw_student` (`homework_id`,`student_id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ä½œä¸šæäº¤è®°å½•';


-- ----------------------------
-- çŸ¥è¯†ç‚¹å…³è”è¡¨ (æ„å»ºçŸ¥è¯†å›¾è°±)
-- ----------------------------
CREATE TABLE `biz_knowledge_point_relation` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `parent_id` bigint NOT NULL COMMENT 'å‰ç½®çŸ¥è¯†ç‚¹ID (çˆ¶èŠ‚ç‚¹)',
  `child_id` bigint NOT NULL COMMENT 'åç½®çŸ¥è¯†ç‚¹ID (å­èŠ‚ç‚¹)',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_relation` (`parent_id`, `child_id`) COMMENT 'é˜²æ­¢é‡å¤å…³è”'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='çŸ¥è¯†ç‚¹å…³ç³»è¡¨';



-- ----------------------------
-- 23. æˆå°±å®šä¹‰è¡¨
-- ----------------------------
CREATE TABLE `biz_achievement` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `name` varchar(100) NOT NULL COMMENT 'æˆå°±åç§°',
  `description` varchar(255) COMMENT 'è¾¾æˆæ¡ä»¶æè¿°',
  `icon_url` varchar(500) COMMENT 'å¾½ç« å›¾æ ‡URL (å¯ä»¥æ˜¯å›¾ç‰‡æˆ–Emoji)',
  `type` varchar(50) NOT NULL COMMENT 'ç±»å‹: SIGN_IN_STREAK(è¿ç­¾), TOTAL_QUESTIONS(åˆ·é¢˜æ•°), PERFECT_PAPER(æ»¡åˆ†è¯•å·)',
  `threshold` int NOT NULL COMMENT 'è¾¾æˆé˜ˆå€¼ (å¦‚ 7, 100, 1)',
  `reward_points` int DEFAULT 0 COMMENT 'å¥–åŠ±ç§¯åˆ†',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='æˆå°±è§„åˆ™è¡¨';

-- ----------------------------
-- 24. ç”¨æˆ·æˆå°±è®°å½•è¡¨
-- ----------------------------
CREATE TABLE `biz_user_achievement` (
  `id` bigint NOT NULL AUTO_INCREMENT,
  `student_id` bigint NOT NULL COMMENT 'å­¦ç”ŸID',
  `achievement_id` bigint NOT NULL COMMENT 'æˆå°±ID',
  `create_time` datetime DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `uk_student_ach` (`student_id`, `achievement_id`) COMMENT 'æ¯ä¸ªæˆå°±æ¯äººåªèƒ½è·å¾—ä¸€æ¬¡'
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COMMENT='ç”¨æˆ·æˆå°±è¡¨';

-- åˆå§‹åŒ–ä¸€äº›åŸºç¡€æˆå°±
INSERT INTO `biz_achievement` (`name`, `description`, `icon_url`, `type`, `threshold`, `reward_points`) VALUES
('åˆå‡ºèŒ…åº', 'ç´¯è®¡å®Œæˆ 10 é“é¢˜ç›®', 'ğŸ¥‰', 'TOTAL_QUESTIONS', 10, 20),
('é¢˜æµ·æˆ˜æœ¯', 'ç´¯è®¡å®Œæˆ 100 é“é¢˜ç›®', 'ğŸ¥ˆ', 'TOTAL_QUESTIONS', 100, 100),
('æŒä¹‹ä»¥æ’', 'è¿ç»­ç­¾åˆ° 7 å¤©', 'ğŸ“…', 'SIGN_IN_STREAK', 7, 50),
('æœˆåº¦æ¨¡èŒƒ', 'è¿ç»­ç­¾åˆ° 30 å¤©', 'ğŸŒ•', 'SIGN_IN_STREAK', 30, 200),
('å®Œç¾ä¸»ä¹‰', 'è·å¾— 1 æ¬¡è¯•å·æ»¡åˆ†', 'ğŸ’¯', 'PERFECT_PAPER', 1, 50);