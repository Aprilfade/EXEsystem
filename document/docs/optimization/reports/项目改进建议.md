# EXEsystem é¡¹ç›®æ”¹è¿›å»ºè®®

> åˆ†ææ—¶é—´ï¼š2026-01-08
> é¡¹ç›®ç‰ˆæœ¬ï¼šv2.51
> åˆ†æèŒƒå›´ï¼šå…¨é¡¹ç›®æ‰«æ

---

## ğŸ“Š é¡¹ç›®æ¦‚å†µ

- **åç«¯æ–‡ä»¶æ•°**ï¼š235ä¸ªJavaæ–‡ä»¶
- **å‰ç«¯æ–‡ä»¶æ•°**ï¼š126ä¸ªVue/TSæ–‡ä»¶
- **ä»£ç è´¨é‡è¯„åˆ†**ï¼š65/100
- **ä¸»è¦é—®é¢˜**ï¼šå®‰å…¨é…ç½®ã€æ€§èƒ½ä¼˜åŒ–ã€ä»£ç è§„èŒƒ

---

## ğŸ”´ ç´§æ€¥ä¿®å¤ï¼ˆCriticalï¼‰

### 1. ç¡¬ç¼–ç å¯†ç å’Œå¯†é’¥ã€ä¸¥é‡å®‰å…¨éšæ‚£ã€‘

**é—®é¢˜æ–‡ä»¶ï¼š** `exe-backend/src/main/resources/application-dev.yml`

```yaml
# âŒ ä¸å®‰å…¨çš„é…ç½®
password: llf5201314
secret: OThiY2RkYjU5ZDIxZDA4YmRhMGE3YjQxZWRiNTViMTE5YzgzMjgxYjM3MjM5ZDE4OTI5M2ExZDAxYjY1ZGMxZA==
```

**å»ºè®®ä¿®å¤ï¼š**

```yaml
# âœ… ä½¿ç”¨ç¯å¢ƒå˜é‡
password: ${DB_PASSWORD}
secret: ${JWT_SECRET}
```

### 2. N+1æŸ¥è¯¢é—®é¢˜ã€æ€§èƒ½é—®é¢˜ã€‘

**é—®é¢˜æ–‡ä»¶ï¼š** `BizExamResultServiceImpl.java:67-90`

```java
// âŒ æ¯ä¸ªå­¦ç”Ÿã€è¯•å·ã€ç§‘ç›®éƒ½å•ç‹¬æŸ¥è¯¢
page.getRecords().stream().map(result -> {
    BizStudent student = studentService.getById(result.getStudentId());
    BizPaper paper = paperService.getById(result.getPaperId());
    BizSubject subject = subjectService.getById(paper.getSubjectId());
})
```

**å»ºè®®ä¿®å¤ï¼š**

```java
// âœ… æ‰¹é‡æŸ¥è¯¢
List<Long> studentIds = results.stream().map(ExamResult::getStudentId).collect(Collectors.toList());
Map<Long, Student> studentMap = studentService.listByIds(studentIds)
    .stream().collect(Collectors.toMap(Student::getId, s -> s));
```

### 3. å…¨è¡¨æŸ¥è¯¢ã€å†…å­˜æ³„éœ²é£é™©ã€‘

**é—®é¢˜æ–‡ä»¶ï¼š** `BizStudentController.java:139`

```java
// âŒ åŠ è½½æ‰€æœ‰è®°å½•åˆ°å†…å­˜
List<Long> activeIds = examResultService.list()
    .stream().map(BizExamResult::getStudentId)
    .distinct().collect(Collectors.toList());
```

**å»ºè®®ä¿®å¤ï¼š**

```sql
-- âœ… ä½¿ç”¨SQLæŸ¥è¯¢
SELECT DISTINCT student_id FROM biz_exam_result;
```

---

## ğŸŸ  é«˜ä¼˜å…ˆçº§ï¼ˆHighï¼‰

### 1. API Keyå®‰å…¨ç®¡ç†

**å½“å‰å®ç°ï¼š** ä»Headerç›´æ¥è·å–ï¼Œç¼ºå°‘æ ¡éªŒ

**å»ºè®®æ”¹è¿›ï¼š**
- å°†API Keyå­˜å‚¨åœ¨æ•°æ®åº“ï¼Œå…³è”ç”¨æˆ·è´¦æˆ·
- å®ç°API Keyè½®æ¢æœºåˆ¶
- æ·»åŠ ä½¿ç”¨é‡è¿½è¸ªå’Œé™åˆ¶

### 2. å¼‚å¸¸å¤„ç†ä¸å®Œå–„

**é—®é¢˜ï¼š** ä½¿ç”¨`printStackTrace()`è€Œéæ—¥å¿—

```java
// âŒ å¤šä¸ªæ–‡ä»¶ä¸­å­˜åœ¨
catch (Exception e) {
    e.printStackTrace();
}
```

**å»ºè®®ä¿®å¤ï¼š**

```java
// âœ… ä½¿ç”¨æ—¥å¿—
catch (Exception e) {
    logger.error("æ“ä½œå¤±è´¥", e);
    throw new BusinessException("æ“ä½œå¤±è´¥: " + e.getMessage());
}
```

### 3. ç¼ºå°‘æ•°æ®åº“ç´¢å¼•

**å»ºè®®æ·»åŠ ç´¢å¼•ï¼š**

```sql
CREATE INDEX idx_student_id ON biz_exam_result(student_id);
CREATE INDEX idx_student_id ON biz_wrong_record(student_id);
CREATE INDEX idx_paper_id ON biz_paper_question(paper_id);
CREATE INDEX idx_subject_id ON biz_question(subject_id);
CREATE INDEX idx_knowledge_point_id ON biz_question_knowledge_point(knowledge_point_id);
```

---

## ğŸŸ¡ ä¸­ä¼˜å…ˆçº§ï¼ˆMediumï¼‰

### 1. é­”æœ¯æ•°å­—å’Œç¡¬ç¼–ç å€¼

**é—®é¢˜ç¤ºä¾‹ï¼š**

```java
// âŒ BizStudentServiceImpl.java:176
totalAnswered = wrongCount * 8 + 35;

// âŒ BizPaperServiceImpl.java:185
pq.setScore(type == 2 ? 4 : (type == 5 ? 10 : 2));
```

**å»ºè®®ä¿®å¤ï¼š**

```java
// âœ… æå–ä¸ºå¸¸é‡
private static final int WRONG_RECORD_MULTIPLIER = 8;
private static final int WRONG_RECORD_OFFSET = 35;
private static final Map<Integer, Integer> QUESTION_TYPE_SCORES = Map.of(
    1, 2,  // å•é€‰
    2, 4,  // å¤šé€‰
    3, 2,  // å¡«ç©º
    4, 2,  // åˆ¤æ–­
    5, 10  // ä¸»è§‚
);
```

### 2. ä»£ç é‡å¤

**é‡å¤æŸ¥è¯¢æ„å»ºä»£ç ï¼š**

å¤šä¸ªControllerä¸­å­˜åœ¨ç›¸åŒçš„æŸ¥è¯¢æ¡ä»¶æ„å»ºé€»è¾‘ã€‚

**å»ºè®®ï¼š** åˆ›å»ºåŸºç¡€æŸ¥è¯¢æ„å»ºå·¥å…·ç±»

```java
public class QueryUtils {
    public static <T> QueryWrapper<T> buildBaseQuery(
        QueryWrapper<T> wrapper, 
        String name, 
        Long subjectId
    ) {
        if (StringUtils.hasText(name)) {
            wrapper.like("name", name);
        }
        if (subjectId != null) {
            wrapper.eq("subject_id", subjectId);
        }
        return wrapper;
    }
}
```

### 3. ç¼“å­˜ç­–ç•¥ä¸ä¸€è‡´

**é—®é¢˜ï¼š** éƒ¨åˆ†Serviceä½¿ç”¨Redisç¼“å­˜ï¼Œéƒ¨åˆ†æ²¡æœ‰

**å»ºè®®ï¼š**
- ç»Ÿä¸€ç¼“å­˜ç­–ç•¥
- æ·»åŠ ç¼“å­˜é¢„çƒ­æœºåˆ¶
- å®ç°ç¼“å­˜ä¸»åŠ¨å¤±æ•ˆ

### 4. å‘½åè§„èŒƒä¸ä¸€è‡´

**é—®é¢˜ç¤ºä¾‹ï¼š**

- `DashboardStatsDTO` vs `StudentDashboardStatsDTO`
- `/export/{id}` vs `/export/pdf/{id}`

**å»ºè®®ï¼š** ç»Ÿä¸€å‘½åè§„èŒƒæ–‡æ¡£

---

## ğŸŸ¢ ä½ä¼˜å…ˆçº§ï¼ˆLowï¼‰

### 1. æœªä½¿ç”¨çš„å¯¼å…¥

å¤šä¸ªæ–‡ä»¶å­˜åœ¨æœªä½¿ç”¨çš„importè¯­å¥ã€‚

**å»ºè®®ï¼š** ä½¿ç”¨IDEè‡ªåŠ¨æ¸…ç†åŠŸèƒ½

### 2. æ—¥å¿—çº§åˆ«ä½¿ç”¨ä¸å½“

**é—®é¢˜ï¼š** é¢‘ç¹æ“ä½œä½¿ç”¨INFOçº§åˆ«

```java
// âŒ BizQuestionController.java:79
logger.info("æŸ¥è¯¢å®Œæˆã€‚ä¸º subjectId: {} æ‰¾åˆ°äº† {} æ¡è®°å½•ã€‚");
```

**å»ºè®®ï¼š** æ”¹ä¸ºDEBUGæˆ–TRACEçº§åˆ«

### 3. ç¼ºå°‘JavaDocæ³¨é‡Š

å¤§é‡publicæ–¹æ³•ç¼ºå°‘è¯¦ç»†çš„JavaDocã€‚

**å»ºè®®ï¼š** è¡¥å……å®Œæ•´çš„APIæ³¨é‡Š

---

## ğŸ“ æ–‡ä»¶æ¸…ç†å»ºè®®

### å¯ä»¥åˆ é™¤çš„æ–‡ä»¶

1. **ä¸´æ—¶æ–‡ä»¶ï¼ˆå·²åˆ é™¤ï¼‰**
   - âœ… `*.tmp` æ–‡ä»¶ï¼ˆ5ä¸ªï¼‰
   - âœ… `compile.log`
   - âœ… å¤‡ä»½æ–‡ä»¶

2. **å¯é€‰åˆ é™¤ï¼ˆéœ€ç¡®è®¤ï¼‰**
   - `uploads/` ç›®å½•ï¼ˆ670MBåª’ä½“æ–‡ä»¶ï¼‰
   - é‡å¤çš„SQLæ–‡ä»¶ï¼ˆ10+ä¸ªï¼‰
   - é‡å¤çš„ä¼˜åŒ–æŠ¥å‘Šæ–‡æ¡£ï¼ˆ16ä¸ªï¼‰

3. **æ„å»ºäº§ç‰©ï¼ˆå¯æ¸…ç†ï¼‰**
   - `exe-backend/target/`
   - `exe-frontend/node_modules/`

### å»ºè®®æ•´åˆçš„æ–‡ä»¶

**SQLæ–‡ä»¶æ•´åˆï¼š**
- å°†å„æ¨¡å—ä¼˜åŒ–SQLåˆå¹¶ä¸º `database-migrations/`ç›®å½•
- æŒ‰ç‰ˆæœ¬å·å‘½åï¼š`V1.0__init.sql`, `V1.1__add_ai.sql`

**æ–‡æ¡£æ•´åˆï¼š**
- å°†æ‰€æœ‰ä¼˜åŒ–æŠ¥å‘Šæ•´åˆåˆ° `docs/optimization/` ç›®å½•
- åˆ›å»ºç´¢å¼•æ–‡æ¡£

---

## ğŸ—ï¸ æ¶æ„æ”¹è¿›å»ºè®®

### 1. å¼•å…¥å•å…ƒæµ‹è¯•

**å½“å‰çŠ¶å†µï¼š** ä»…æœ‰åŸºç¡€æµ‹è¯•æ¡†æ¶

**å»ºè®®ï¼š**
- Serviceå±‚å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 60%
- Controllerå±‚é›†æˆæµ‹è¯•
- ä½¿ç”¨JUnit 5 + Mockito

### 2. æ·»åŠ æ€§èƒ½ç›‘æ§

**å»ºè®®å·¥å…·ï¼š**
- Spring Boot Actuatorï¼ˆå·²é›†æˆï¼‰
- Prometheus + Grafanaç›‘æ§
- SkyWalkingé“¾è·¯è¿½è¸ª

### 3. å®ç°è¯»å†™åˆ†ç¦»

**é€‚ç”¨åœºæ™¯ï¼š** å½“æ•°æ®é‡å¢é•¿åˆ°ä¸€å®šè§„æ¨¡

**å»ºè®®ï¼š**
- ä¸»ä»æ•°æ®åº“é…ç½®
- è¯»æ“ä½œèµ°ä»åº“
- å†™æ“ä½œèµ°ä¸»åº“

### 4. å¾®æœåŠ¡æ‹†åˆ†å‡†å¤‡

**å½“å‰å•ä½“åº”ç”¨å¯æ‹†åˆ†ä¸ºï¼š**
- ç”¨æˆ·è®¤è¯æœåŠ¡
- é¢˜åº“ç®¡ç†æœåŠ¡
- è€ƒè¯•æœåŠ¡
- AIæœåŠ¡
- å®æ—¶é€šä¿¡æœåŠ¡

---

## ğŸ“ˆ æ€§èƒ½ä¼˜åŒ–å»ºè®®

### 1. æ•°æ®åº“ä¼˜åŒ–

```sql
-- æ·»åŠ å¤åˆç´¢å¼•
CREATE INDEX idx_exam_result_student_paper ON biz_exam_result(student_id, paper_id);
CREATE INDEX idx_wrong_record_student_kp ON biz_wrong_record(student_id, knowledge_point_id);

-- åˆ†åŒºè¡¨ï¼ˆå½“æ•°æ®é‡å¤§æ—¶ï¼‰
ALTER TABLE biz_exam_result 
PARTITION BY RANGE (YEAR(create_time)) (
    PARTITION p2024 VALUES LESS THAN (2025),
    PARTITION p2025 VALUES LESS THAN (2026)
);
```

### 2. Redisç¼“å­˜ä¼˜åŒ–

```java
// çƒ­ç‚¹æ•°æ®ç¼“å­˜
@Cacheable(value = "subjects", key = "#root.methodName")
public List<Subject> getAllSubjects() {
    return subjectMapper.selectList(null);
}

// ç¼“å­˜å¤±æ•ˆç­–ç•¥
@CacheEvict(value = "subjects", allEntries = true)
public void updateSubject(Subject subject) {
    subjectMapper.updateById(subject);
}
```

### 3. å‰ç«¯æ€§èƒ½ä¼˜åŒ–

```javascript
// è™šæ‹Ÿæ»šåŠ¨ï¼ˆå¤§åˆ—è¡¨ï¼‰
import { useVirtualList } from '@vueuse/core'

// å›¾ç‰‡æ‡’åŠ è½½
<img v-lazy="imageUrl" />

// è·¯ç”±æ‡’åŠ è½½
const Home = () => import('./views/Home.vue')
```

---

## ğŸ” å®‰å…¨åŠ å›ºå»ºè®®

### 1. è¾“å…¥éªŒè¯

**æ·»åŠ å…¨å±€éªŒè¯æ³¨è§£ï¼š**

```java
@Valid
@PostMapping
public Result create(@RequestBody @Valid QuestionDTO dto) {
    // ...
}

public class QuestionDTO {
    @NotBlank(message = "é¢˜ç›®å†…å®¹ä¸èƒ½ä¸ºç©º")
    @Size(max = 1000, message = "é¢˜ç›®å†…å®¹ä¸èƒ½è¶…è¿‡1000å­—")
    private String content;
}
```

### 2. XSSé˜²æŠ¤

```java
// å…¨å±€XSSè¿‡æ»¤å™¨
@Bean
public FilterRegistrationBean xssFilterRegistration() {
    FilterRegistrationBean registration = new FilterRegistrationBean();
    registration.setFilter(new XssFilter());
    registration.addUrlPatterns("/*");
    return registration;
}
```

### 3. CSRFé˜²æŠ¤

```java
// SecurityConfigä¸­å¯ç”¨CSRF
http.csrf()
    .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse());
```

---

## ğŸ“ æ–‡æ¡£æ”¹è¿›å»ºè®®

### 1. è¡¥å……æ–‡æ¡£

- [x] âœ… README.mdï¼ˆå·²é‡å†™ï¼‰
- [x] âœ… API_DOCUMENTATION.mdï¼ˆå·²åˆ›å»ºï¼‰
- [ ] æ•°æ®åº“è®¾è®¡æ–‡æ¡£
- [ ] éƒ¨ç½²è¿ç»´æ‰‹å†Œ
- [ ] å¼€å‘è§„èŒƒæ–‡æ¡£

### 2. ä»£ç æ³¨é‡Š

**Controllerå±‚ï¼š**

```java
/**
 * è·å–ç§‘ç›®åˆ—è¡¨
 * @param current å½“å‰é¡µç 
 * @param size æ¯é¡µæ¡æ•°
 * @param name ç§‘ç›®åç§°ï¼ˆæ¨¡ç³Šæœç´¢ï¼‰
 * @return ç§‘ç›®åˆ—è¡¨åˆ†é¡µæ•°æ®
 */
@Operation(summary = "è·å–ç§‘ç›®åˆ—è¡¨", description = "æ”¯æŒåˆ†é¡µå’Œåç§°æœç´¢")
public Result getSubjects(...)
```

**Serviceå±‚ï¼š**

```java
/**
 * æ‰¹é‡æ›´æ–°çŸ¥è¯†ç‚¹
 * @param dto æ‰¹é‡æ›´æ–°å‚æ•°ï¼ˆIDåˆ—è¡¨ã€ç§‘ç›®IDã€å¹´çº§ã€æ ‡ç­¾ï¼‰
 * @return true=æ›´æ–°æˆåŠŸï¼Œfalse=æ›´æ–°å¤±è´¥
 * @throws BusinessException å½“å‚æ•°æ— æ•ˆæ—¶æŠ›å‡º
 */
public boolean batchUpdateKnowledgePoints(KnowledgePointBatchUpdateDTO dto)
```

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’

### ç«‹å³æ‰§è¡Œï¼ˆæœ¬å‘¨ï¼‰

1. âœ… æ¸…ç†ä¸´æ—¶æ–‡ä»¶
2. âœ… æ›´æ–°READMEå’ŒAPIæ–‡æ¡£
3. ğŸ”„ ä¿®å¤ç¡¬ç¼–ç å¯†ç ï¼ˆä»é…ç½®æ–‡ä»¶ç§»é™¤ï¼‰
4. ğŸ”„ æ·»åŠ æ•°æ®åº“ç´¢å¼•

### çŸ­æœŸè®¡åˆ’ï¼ˆæœ¬æœˆï¼‰

1. ä¿®å¤N+1æŸ¥è¯¢é—®é¢˜
2. å®Œå–„å¼‚å¸¸å¤„ç†
3. è¡¥å……å•å…ƒæµ‹è¯•
4. æ•´ç†SQLæ–‡ä»¶å’Œæ–‡æ¡£

### ä¸­æœŸè®¡åˆ’ï¼ˆ3ä¸ªæœˆï¼‰

1. å¼•å…¥æ€§èƒ½ç›‘æ§
2. å®ç°è¯»å†™åˆ†ç¦»
3. å®Œå–„å®‰å…¨é˜²æŠ¤
4. ä»£ç è´¨é‡æå‡åˆ°80åˆ†ä»¥ä¸Š

### é•¿æœŸè®¡åˆ’ï¼ˆ6ä¸ªæœˆï¼‰

1. å¾®æœåŠ¡æ¶æ„æ”¹é€ è§„åˆ’
2. ç§»åŠ¨ç«¯Appå¼€å‘
3. å¤§æ•°æ®åˆ†ææ¨¡å—
4. å›½é™…åŒ–æ”¯æŒ

---

## ğŸ“Š æ”¹è¿›æ•ˆæœé¢„æœŸ

å®æ–½æ‰€æœ‰æ”¹è¿›å»ºè®®åï¼Œé¢„æœŸæ•ˆæœï¼š

| æŒ‡æ ‡ | å½“å‰ | ç›®æ ‡ |
|------|------|------|
| ä»£ç è´¨é‡è¯„åˆ† | 65/100 | 85/100 |
| æµ‹è¯•è¦†ç›–ç‡ | 10% | 60% |
| APIå“åº”æ—¶é—´ | 200ms | 100ms |
| å®‰å…¨è¯„åˆ† | 50/100 | 90/100 |
| æ–‡æ¡£å®Œæ•´åº¦ | 60% | 95% |

---

## ğŸ¤ æ€»ç»“

EXEsystemæ˜¯ä¸€ä¸ªåŠŸèƒ½å®Œæ•´ã€æ¶æ„æ¸…æ™°çš„åœ¨çº¿æ•™è‚²å¹³å°ã€‚é€šè¿‡å®æ–½ä»¥ä¸Šæ”¹è¿›å»ºè®®ï¼Œå¯ä»¥æ˜¾è‘—æå‡ç³»ç»Ÿçš„ï¼š

- âœ… **å®‰å…¨æ€§**ï¼šæ¶ˆé™¤ç¡¬ç¼–ç å¯†é’¥ã€å®Œå–„æƒé™æ§åˆ¶
- âœ… **æ€§èƒ½**ï¼šä¼˜åŒ–æŸ¥è¯¢ã€æ·»åŠ ç´¢å¼•ã€åˆç†ä½¿ç”¨ç¼“å­˜
- âœ… **å¯ç»´æŠ¤æ€§**ï¼šç»Ÿä¸€ä»£ç è§„èŒƒã€è¡¥å……æ–‡æ¡£ã€å¢åŠ æµ‹è¯•
- âœ… **å¯é æ€§**ï¼šå®Œå–„å¼‚å¸¸å¤„ç†ã€æ·»åŠ ç›‘æ§

å»ºè®®æŒ‰ç…§ä¼˜å…ˆçº§é€æ­¥å®æ–½ï¼ŒæŒç»­æ”¹è¿›é¡¹ç›®è´¨é‡ã€‚

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´ï¼š** 2026-01-08
**ä¸‹æ¬¡è¯„ä¼°æ—¶é—´ï¼š** 2026-02-08ï¼ˆå»ºè®®æ¯æœˆè¯„ä¼°ä¸€æ¬¡ï¼‰

